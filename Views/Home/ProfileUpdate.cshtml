@using MatchMaking.Areas.Admin.Models
@using MatchMaking.Infra
@model (Profile Profile, List<SelectListItem_Custom> SelectListItems)

@{
	ViewData["Title"] = "Profile";

	DateTime? nullDateTime = null;

	string filePath_CoverPhoto = System.IO.Path.Combine(AppHttpContextAccessor.WebRootPath, "UploadPhotos", "Cover", Model.Profile.Id + ".jpg");
	string filePath_ProfilePhoto = System.IO.Path.Combine(AppHttpContextAccessor.WebRootPath, "UploadPhotos", "Profile", Model.Profile.Id + ".jpg");

	List<string> filePath_OtherPhotos = Directory.GetFiles(System.IO.Path.Combine(AppHttpContextAccessor.WebRootPath, "UploadPhotos", "Others"), $"{Model.Profile.Id}_*.jpg", SearchOption.AllDirectories).OrderByDescending(f => f).ToList();
}


@section Styles {
	<style type="text/css">
		.info-card .info-card-content .info-list li .info-details input,
		.info-card .info-card-content .info-list li .info-details select {
			border: 1px solid #ecf0f3 !important;
		}

		.info-card .info-card-content .info-list li .info-details select {
			background: #f9f9f9 !important;
			padding: 7px 10px;
			padding-right: 120px;
			border: 1px solid rgba(255, 255, 255, 0.1);
			outline: none;
			box-shadow: none;
		}

		#formUploadPhotos .custom-upload {
			top: 20px;
			right: 20px;
			width: max-content;
			height: max-content;
			border: 1px solid rgba(255, 255, 255, 0.5);
			padding: 5px 10px;
			border-radius: 5px;
			background: rgba(223, 49, 77, 1);
			opacity: 1;
			transform: translateY(-5px);
			-webkit-transition: all 0.3s ease;
			-moz-transition: all 0.3s ease;
			transition: all 0.3s ease;
		}

		.gallery-img img {
			height: 225px !important;
		}
	</style>
}



<!-- ==========Profile Section Start Here========== -->
<section class="profile-section padding-tb bg-ash">
	<div class="container">
		<div class="section-wrapper">
			<div class="member-profile">
				<div class="profile-item">
					<div class="profile-cover">
						@if (Model.Profile != null && Model.Profile.Id > 0 && System.IO.File.Exists(filePath_CoverPhoto))
						{
							<img src="@filePath_CoverPhoto.Replace(AppHttpContextAccessor.WebRootPath, "").Replace("\\", "/")" alt="cover-pic">
						}
						else
						{
							<img src="~/cover-1042423.jpg" alt="cover-pic" style="height: 150px">
							@* <img src="~/assets/images/profile/cover.jpg" alt="cover-pic"> *@
						}

						<div class="edit-photo custom-upload">
							<a href="#" data-bs-toggle="modal" data-bs-target="#modalCoverPhoto" data-for-target="Cover" class="">
								<i class="icofont-camera"></i> <span>Edit Photo</span>
							</a>
							@* <div class="file-btn" data-bs-toggle="modal" data-bs-target="#modalUploadPhotos" data-for-target="Cover">
								<i class="icofont-camera"></i>
								Edit Photo
							</div> *@
						</div>
					</div>
					<div class="profile-information">
						<div class="profile-pic">
							@if (Model.Profile != null && Model.Profile.Id > 0 && System.IO.File.Exists(filePath_ProfilePhoto))
							{
								<img src="@filePath_ProfilePhoto.Replace(AppHttpContextAccessor.WebRootPath, "").Replace("\\", "/")" alt="profile-pic">
							}
							else
							{
								<img src="~/no_image_available.png" alt="profile-pic" style="width: 210px; height: 310px">
								@* <img src="~/assets/images/profile/Profile.jpg" alt="DP"> *@
							}

							<div class="custom-upload">
								<a href="#" data-bs-toggle="modal" data-bs-target="#modalProfilePhoto" data-for-target="Profile" class="">
									<i class="icofont-camera"></i> <span>Edit</span>
								</a>
								@* <div class="file-btn" role="button" data-bs-toggle="modal" data-bs-target="#modalUploadPhotos" data-for-target="Profile">
									<span class="d-none d-lg-inline-block">
										<i class="icofont-camera"></i>
										Edit
									</span>
									<span class="d-lg-none mr-0"><i class="icofont-plus"></i></span>
								</div> *@
							</div>
						</div>
						<div class="profile-name">
							<h4>@(Model.Profile != null && !string.IsNullOrEmpty(Model.Profile.FullName) && Model.Profile.FullName.Trim().Count() > 2 ? Model.Profile.FullName : "Your Name")</h4>
						</div>
					</div>
				</div>
				<div class="profile-details">
					<nav class="profile-nav mb-2">
						<div class="nav nav-tabs" id="nav-tab" role="tablist">
							<button class="nav-link active" id="nav-profile-tab" data-bs-toggle="tab"
									data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
									aria-selected="false">
								Profile
							</button>
							<button class="nav-link" id="nav-photos-tab" data-bs-toggle="tab"
									data-bs-target="#photos" type="button" role="tab" aria-controls="photos"
									aria-selected="false">
								Photos
							</button>
							<a asp-area="" asp-controller="Home" asp-action="Profile" class="lab-btn text-end mr-2" style="margin-left: auto;"> Back </a>
						</div>
					</nav>
					<div class="tab-content" id="nav-tabContent">
						<!-- Profile tab -->
						<div class="tab-pane activity-page fade show active" id="profile" role="tabpanel" aria-labelledby="nav-profile-tab">
							<div class="container">
								<div class="row no-gutters">
									<div class="col-lg-12 px-0">
										<article class="contact-form-wrapper bg-transparent px-0 pt-0">
											<div class="contact-form">
												<form id="formProfile" asp-area="" asp-controller="Home" asp-action="Profile" method="post" class="comment-form">

													<div class="row w-100">
														<div class="col-xl-6">
															<article>
																<div class="info-card mb-20">
																	<div class="info-card-title">
																		<h6>Personal Info</h6>
																	</div>
																	<div class="info-card-content">
																		<ul class="info-list">
																			<li>
																				<p class="info-name">Name</p>
																				<p class="info-details">
																					<input type="text" name="Firstname" value="@Model.Profile.Firstname" class="w-100 mb-0 py-1 px-2 border-1">
																				</p>
																			</li>
																			<li>
																				<p class="info-name">I'm a</p>
																				<p class="info-details">
																					<select id="Gender" name="Gender" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Gender"))
																						{
																							if (Model.Profile.Gender == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Loking for a</p>
																				<p class="info-details">
																					<select id="LookingForGender" name="LookingForGender" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Gender"))
																						{
																							if (Model.Profile.LookingForGender == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Marital Status</p>
																				<p class="info-details">
																					<select id="MaritalStatus" name="MaritalStatus" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "MaritalStatus"))
																						{
																							if (Model.Profile.MaritalStatus == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Date of Birth</p>
																				<p class="info-details"><input type="date" name="DateOfBirth" value="@Model.Profile.DateOfBirth?.ToString("yyyy-MM-dd")" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Address</p>
																				<p class="info-details">
																					<textarea name="FullAddress" rows="3">@(Model.Profile != null && !string.IsNullOrEmpty(Model.Profile.FullAddress) ? Model.Profile.FullAddress : "")</textarea>
																				</p>
																			</li>
																			<br />
																			<li>
																				<p class="info-name">Education</p>
																				<p class="info-details">
																					<select id="Education" name="Education" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Education"))
																						{
																							if (Model.Profile.Education == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Occupation</p>
																				<p class="info-details">
																					<select id="Occupation" name="Occupation" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Occupation"))
																						{
																							if (Model.Profile.Occupation == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																		</ul>

																	</div>
																</div>

																<div class="info-card mb-20">
																	<div class="info-card-title">
																		<h6>Family details</h6>
																	</div>
																	<div class="info-card-content">
																		<ul class="info-list">
																			<li>
																				<p class="info-name">Jain Group</p>
																				<p class="info-details">
																					<select id="GroupId" name="GroupId" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "JainGroup"))
																						{
																							if (Model.Profile.GroupId.ToString() == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Surname</p>
																				<p class="info-details"><input type="text" name="PaternalSurname" value="@Model.Profile.PaternalSurname" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Father's name</p>
																				<p class="info-details"><input type="text" name="Fathername" value="@Model.Profile.Fathername" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Mother's name</p>
																				<p class="info-details"><input type="text" name="Mothername" value="@Model.Profile.Mothername" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Mother’s Family name</p>
																				<p class="info-details"><input type="text" name="MaternalSurname" value="@Model.Profile.MaternalSurname" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Mother’s native village (Mosal)</p>
																				<p class="info-details"><input type="text" name="Mosal" value="@Model.Profile.Mosal" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																		</ul>

																	</div>
																</div>
															</article>
														</div>

														<div class="col-xl-6">
															<aside class="mt-5 mt-xl-0">
																<div class="info-card mb-20">
																	<div class="info-card-title">
																		<h6>Physical info</h6>
																	</div>
																	<div class="info-card-content">
																		<ul class="info-list">
																			<li>
																				<p class="info-name">Height</p>
																				<p class="info-details input-group">
																					<input type="text" name="Height" value="@Model.Profile.Height" class="mb-0 py-1 px-2 border-1" aria-describedby="basic-addon1">
																					<span class="input-group-text" id="basic-addon1">ft</span>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Weight</p>
																				<p class="info-details input-group">
																					<input type="text" name="Weight" value="@Model.Profile.Weight" class="mb-0 py-1 px-2 border-1" aria-describedby="basic-addon2">
																					<span class="input-group-text" id="basic-addon2">kg</span>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Hair Color</p>
																				<p class="info-details"><input type="text" name="HairColor" value="@Model.Profile.HairColor" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Eye Color</p>
																				<p class="info-details"><input type="text" name="EyeColor" value="@Model.Profile.EyeColor" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																			<li>
																				<p class="info-name">Body Type</p>
																				<p class="info-details"><input type="text" name="BodyType" value="@Model.Profile.BodyType" class="w-100 mb-0 py-1 px-2 border-1"></p>
																			</li>
																		</ul>

																	</div>
																</div>
																<div class="info-card mb-20">
																	<div class="info-card-title">
																		<h6>Myself Summary</h6>
																	</div>
																	<div class="info-card-content">
																		<p><textarea name="Summary" rows="3">@(Model.Profile != null && !string.IsNullOrEmpty(Model.Profile.Summary) ? Model.Profile.Summary : "")</textarea></p>
																	</div>
																</div>

																<div class="info-card mb-20">
																	<div class="info-card-title">
																		<h6>Lifestyle</h6>
																	</div>
																	<div class="info-card-content">
																		<ul class="info-list">
																			<li>
																				<p class="info-name">Interest</p>
																				<p class="info-details">
																					<select id="Interests" name="Interests" class="w-100" multiple>
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Interest"))
																						{
																							if (Model.Profile.Interests != null && Model.Profile.Interests.Split(",").Contains(item.Value))
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Smoking</p>
																				<p class="info-details">
																					<select id="Smoking" name="Smoking" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Smoking"))
																						{
																							if (Model.Profile.Smoking == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Diet</p>
																				<p class="info-details">
																					<select id="Diet" name="Diet" class="w-100">
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Diet"))
																						{
																							if (Model.Profile.Diet == item.Value)
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																			<li>
																				<p class="info-name">Language</p>
																				<p class="info-details">
																					<select id="Language" name="Language" class="w-100" multiple>
																						@foreach (var item in Model.SelectListItems.Where(x => x.Group == "Language"))
																						{
																							if (Model.Profile.Language != null && Model.Profile.Language.Split(",").Contains(item.Value))
																							{
																								<option value="@item.Value" selected>@item.Text</option>
																							}
																							else
																							{
																								<option value="@item.Value">@item.Text</option>
																							}
																						}
																					</select>
																				</p>
																			</li>
																		</ul>

																	</div>
																</div>
															</aside>
														</div>
													</div>

													<div class="row w-100">
														<div class="col-xl-12">
															<div class="info-card bg-transparent border-0 mb-20">
																<div class="info-card-title border-0 text-center pt-0">
																	<button type="button" class="lab-btn pt-0 w-50 btnSubmit" data-form="formProfile">
																		<span>Submit</span>
																	</button>
																</div>
															</div>
														</div>
													</div>

												</form>
											</div>
										</article>
									</div>
								</div>
							</div>

						</div>
						<!-- Photos Tab -->
						<div class="tab-pane fade" id="photos" role="tabpanel" aria-labelledby="nav-photos-tab">
							<div class="row">
								<div class="col">
									<ul class="group-search">
										<li class="group-count">
											<h3 class="mb-0">Upload Pictures</h3>
										</li>
										<li class="group-search-btn lab-btn">

											@* <form id="formUploadPhotos" asp-area="" asp-controller="Home" asp-action="UploadPhotos" method="post" enctype="multipart/form-data">
												<div class="edit-photo custom-upload">
													<div class="file-btn">
														<i class="icofont-camera"></i>
														Upload Photo(s)
													</div>
													<input type="file" multiple>
												</div>
											</form> *@

											<a href="#" data-bs-toggle="modal" data-bs-target="#modalUploadPhotos" data-for-target="Others" class="signup">
												<i class="icofont-camera"></i> <span>Upload Photos</span>
											</a>

										</li>
									</ul>
								</div>
							</div>


							<div class="row justify-content-center col-12">
								@if (filePath_OtherPhotos != null && filePath_OtherPhotos.Count() > 0)
								{
									foreach (var filePath in filePath_OtherPhotos)
									{
										<div class="col">
											<div class="gallery-img">
												<img src="@filePath.Replace(AppHttpContextAccessor.WebRootPath, "").Replace("\\", "/")" alt="image" class="rounded">
											</div>
										</div>
									}
								}
								else
								{
									<section class="fore-zero padding-tb bg-ash">
										<div class="container">
											<div class="section-wrapper">
												<div class="zero-item">
													<div class="zero-content">
														<h2>No any Photo(s) uploaded.</h2>
														<a href="#" data-bs-toggle="modal" data-bs-target="#modalUploadPhotos" data-for-target="Others" class="lab-btn">
															<i class="icofont-camera"></i> <span>Upload Photos</span>
														</a>
													</div>
												</div>
											</div>
										</div>
									</section>
								}
							</div>
							@* <div class="load-btn">
								<a href="#" class="lab-btn">Load More<i class="icofont-spinner"></i></a>
							</div> *@
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- ==========Profile Section Ends Here========== -->
