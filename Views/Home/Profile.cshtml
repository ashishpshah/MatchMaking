@using MatchMaking.Infra
@model Profile

@{
	ViewData["Title"] = "Profile";

	DateTime? nullDateTime = null;

	string filePath_CoverPhoto = System.IO.Path.Combine(AppHttpContextAccessor.WebRootPath, "UploadPhotos", "Cover", Model.Id + ".jpg");
	string filePath_ProfilePhoto = System.IO.Path.Combine(AppHttpContextAccessor.WebRootPath, "UploadPhotos", "Profile", Model.Id + ".jpg");

	List<string> filePath_OtherPhotos = Directory.GetFiles(System.IO.Path.Combine(AppHttpContextAccessor.WebRootPath, "UploadPhotos", "Others"), $"{Model.Id}_*.jpg", SearchOption.AllDirectories).OrderByDescending(f => f).ToList();
}

@section Styles {
	<style type="text/css">
		.gallery-img img {
			height: 225px !important;
		}
	</style>
}

<!-- ==========Profile Section Start Here========== -->
<section class="profile-section padding-tb bg-ash">
	<div class="container">
		<div class="section-wrapper">
			<div class="member-profile">
				<div class="profile-item">
					<div class="profile-cover">
						@if (Model != null && Model.Id > 0 && System.IO.File.Exists(filePath_CoverPhoto))
						{
							<img src="@filePath_CoverPhoto.Replace(AppHttpContextAccessor.WebRootPath, "").Replace("\\", "/")" alt="cover-pic">
						}
						else
						{
							<img src="~/cover-1042423.jpg" alt="cover-pic" style="height: 150px">
							@* <img src="~/assets/images/profile/cover.jpg" alt="cover-pic"> *@
						}

						@* <div class="edit-photo custom-upload">
							<div class="file-btn">
								<i class="icofont-camera"></i>
								Edit Photo
							</div>
							<input type="file" name="fileCover">
						</div> *@
					</div>
					<div class="profile-information">
						<div class="profile-pic">
							@if (Model != null && Model.Id > 0 && System.IO.File.Exists(filePath_ProfilePhoto))
							{
								<img src="@filePath_ProfilePhoto.Replace(AppHttpContextAccessor.WebRootPath, "").Replace("\\", "/")" alt="profile-pic">
							}
							else
							{
								<img src="~/no_image_available.png" alt="profile-pic" style="width: 210px; height: 310px">
								@* <img src="~/assets/images/profile/Profile.jpg" alt="DP"> *@
							}

							@* <div class="custom-upload">
								<div class="file-btn">
									<span class="d-none d-lg-inline-block">
										<i class="icofont-camera"></i>
										Edit
									</span>
									<span class="d-lg-none mr-0"><i class="icofont-plus"></i></span>
								</div>
								<input type="file" name="fileProfile">
							</div> *@
						</div>
						<div class="profile-name">
							<h4>@(Model != null && !string.IsNullOrEmpty(Model.FullName) && Model.FullName.Trim().Count() > 2 ? Model.FullName : "Your Name")</h4>
						</div>
					</div>
				</div>
				<div class="profile-details">
					<nav class="profile-nav mb-2">
						<div class="nav nav-tabs" id="nav-tab" role="tablist">
							<button class="nav-link active" id="nav-profile-tab" data-bs-toggle="tab"
									data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
									aria-selected="false">
								Profile
							</button>
							<button class="nav-link" id="nav-photos-tab" data-bs-toggle="tab"
									data-bs-target="#photos" type="button" role="tab" aria-controls="photos"
									aria-selected="false">
								Photos
							</button>
							<a asp-area="" asp-controller="Home" asp-action="ProfileUpdate" class="lab-btn text-end mr-2" style="margin-left: auto;">
								Edit Profile
							</a>
						</div>
					</nav>
					<div class="tab-content" id="nav-tabContent">
						<!-- Profile tab -->
						<div class="tab-pane activity-page fade show active" id="profile" role="tabpanel" aria-labelledby="nav-profile-tab">
							<div>
								<div class="row">
									<div class="col-xl-6">
										<article>
											<div class="info-card mb-20">
												<div class="info-card-title">
													<h6>Personal Info</h6>
												</div>
												<div class="info-card-content">
													<ul class="info-list">
														<li>
															<p class="info-name">Name</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.FullName) && Model.FullName.Trim().Count() > 2 ? Model.FullName : "Your Name")</p>
														</li>
														<li>
															<p class="info-name">I'm a</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Gender) ? Model.Gender : "")</p>
														</li>
														<li>
															<p class="info-name">Loking for a</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.LookingForGender) ? Model.LookingForGender : "")</p>
														</li>
														<li>
															<p class="info-name">Marital Status</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.MaritalStatus) ? Model.MaritalStatus : "")</p>
														</li>
														<li>
															<p class="info-name">Age</p>
															@{
																DateTime? dateOfBirth = Model != null && Model.DateOfBirth.HasValue && Model.DateOfBirth.Value > DateTime.MinValue ? Model.DateOfBirth.Value : nullDateTime;

																(int Years, int Months, int Days) age = dateOfBirth != null ? CommonMethods.GetAge(dateOfBirth) : new(0, 0, 0);
															}
															<p class="info-details">@($"{age.Years} Years, {age.Months} Months, {age.Days} Days")</p>
														</li>
														<li>
															<p class="info-name">Date of Birth</p>
															<p class="info-details">@(Model != null && Model.DateOfBirth.HasValue && Model.DateOfBirth.Value > DateTime.MinValue ? Model.DateOfBirth.Value.ToString("dd/MM/yyyy").Replace("-", "/") : "")</p>
														</li>
														<li>
															<p class="info-name">Address</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.FullAddress) ? Model.FullAddress : "")</p>
														</li>
														<br />
														<li>
															<p class="info-name">Education</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Education) ? Model.Education : "")</p>
														</li>
														<li>
															<p class="info-name">Occupation</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Occupation) ? Model.Occupation : "")</p>
														</li>
													</ul>

												</div>
											</div>
											<div class="info-card mb-20">
												<div class="info-card-title">
													<h6>Family details</h6>
												</div>
												<div class="info-card-content">
													<ul class="info-list">
														<li>
															<p class="info-name">Jain Group</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.GroupName) ? Model.GroupName : "")</p>
														</li>
														<li>
															<p class="info-name">Surname</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.PaternalSurname) ? Model.PaternalSurname : "")</p>
														</li>
														<li>
															<p class="info-name">Father's name</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Fathername) ? Model.Fathername : "")</p>
														</li>
														<li>
															<p class="info-name">Mother's name</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Mothername) ? Model.Mothername : "")</p>
														</li>
														<li>
															<p class="info-name">Mother’s Family name</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.MaternalSurname) ? Model.MaternalSurname : "")</p>
														</li>
														<li>
															<p class="info-name">Mother’s native village (Mosal)</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Mosal) ? Model.Mosal : "")</p>
														</li>
													</ul>

												</div>
											</div>
										</article>
									</div>

									<div class="col-xl-6">
										<aside class="mt-5 mt-xl-0">
											<div class="info-card mb-20">
												<div class="info-card-title">
													<h6>Physical info</h6>
												</div>
												<div class="info-card-content">
													<ul class="info-list">
														<li>
															<p class="info-name">Height</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Height) ? Model.Height : "0") ft</p>
														</li>
														<li>
															<p class="info-name">Weight</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Weight) ? Model.Weight : "0")  kg</p>
														</li>
														<li>
															<p class="info-name">Hair Color</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.HairColor) ? Model.HairColor : "") </p>
														</li>
														<li>
															<p class="info-name">Eye Color</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.EyeColor) ? Model.EyeColor : "") </p>
														</li>
														<li>
															<p class="info-name">Body Type</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.BodyType) ? Model.BodyType : "") </p>
														</li>
													</ul>

												</div>
											</div>
											@if (Model != null && !string.IsNullOrEmpty(Model.Summary))
											{
												<div class="info-card mb-20">
													<div class="info-card-title">
														<h6>Myself Summary</h6>
													</div>
													<div class="info-card-content">
														<p>@Model.Summary</p>
													</div>
												</div>
											}

											<div class="info-card mb-20">
												<div class="info-card-title">
													<h6>Lifestyle</h6>
												</div>
												<div class="info-card-content">
													<ul class="info-list">
														<li>
															<p class="info-name">Interest</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Interests) ? Model.Interests : "")</p>
														</li>
														<li>
															<p class="info-name">Smoking</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Smoking) ? Model.Smoking : "")</p>
														</li>
														<li>
															<p class="info-name">Language</p>
															<p class="info-details">@(Model != null && !string.IsNullOrEmpty(Model.Language) ? Model.Language : "")</p>
														</li>
													</ul>

												</div>
											</div>
										</aside>
									</div>
								</div>
							</div>
						</div>
						<!-- Photos Tab -->
						<div class="tab-pane fade" id="photos" role="tabpanel" aria-labelledby="nav-photos-tab">
							<div class="photo-title text-center border-radius-2 bg-white p-1 mb-4">
								<h3 class="mb-0">All Uploaded Pictures</h3>
							</div>
							<div class="row col-12">
								@if (filePath_OtherPhotos != null && filePath_OtherPhotos.Count() > 0)
								{
									foreach (var filePath in filePath_OtherPhotos)
									{
										<div class="col">
											<div class="gallery-img">
												<img src="@filePath.Replace(AppHttpContextAccessor.WebRootPath, "").Replace("\\", "/")" alt="image" class="rounded">
											</div>
										</div>
									}
								}
								else
								{
									<section class="fore-zero padding-tb bg-ash">
										<div class="container">
											<div class="section-wrapper">
												<div class="zero-item">
													<div class="zero-content">
														<h2>No any Photo(s) uploaded.</h2>
														<a href="#" data-bs-toggle="modal" data-bs-target="#modalUploadPhotos" data-for-target="Others" class="lab-btn">
															<i class="icofont-camera"></i> <span>Upload Photos</span>
														</a>
													</div>
												</div>
											</div>
										</div>
									</section>
								}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- ==========Profile Section Ends Here========== -->
